<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:sparkle="http://www.andymatuschak.org/xml-namespaces/sparkle" xmlns:dc="http://purl.org/dc/elements/1.1/">
	<channel>
		<title>E:D Market Connector</title>
		<link>https://raw.githubusercontent.com/EDCD/EDMarketConnector/releases/edmarketconnector.xml</link>
		<description>Most recent changes with links to updates.</description>

		<!-- Important: Mac must be listed before Windows since Sparkle < 1.18.1 on OSX doesn't check sparkle:os -->

		<item>
			<title>Release 3.44</title>
			<description>
				<![CDATA[
<style>h2 { font-size: 105%; }</style>
<h2>Release 3.44</h2>
<p><b>CHANGE OF MAINTAINER</b></p>
<p>Due to a lack of time to give the project the attention it needs Marginal has handed over ownership of the EDMarketConnector GitHub repository to the EDCD (Elite Dangerous Community Developers) organisation.</p>
<p>Initially Athanasius will now be responsible for maintaining the code, including addressing any Pull Requests and Issues, and making releases.  <b><u>Unfortunately he has no access to hardware running MacOS so can't easily generate builds for that platform</u> or test them.  So for the time being releases will be for Windows 10 only.</b>  MacOS users are advised to look into running from source (see the github README).</p>
<p>Going forwards the intention is to move to the python 3.7 code as soon as possible.  To facilitate this there will be one more python 2.7 release in addition to this one, with the main aim of that being to add code to alert the user about any plugins they use that have apparently not been updated to run under python 3.7.</p>
<p>See the project GitHub repository's <a href="https://github.com/EDCD/EDMarketConnector/blob/main/README.md">README.md</a> for further information.</p>
<ul>
 <li>Version increased to 3.4.4.0 / 3.44.</li>
 <li>URL the application checks for updates changed to point to github,</li>
</ul>
				]]>
			</description>
			<enclosure
				url="https://github.com/EDCD/EDMarketConnector/releases/download/rel-344/EDMarketConnector_mac_344.zip"
				sparkle:os="macos"
				sparkle:version="3.4.4.0"
				length="6058091"
				type="application/octet-stream"
			/>
		</item>

		<!-- Windows -->

		<item>
			<title>Release 5.6.0</title>
			<description>
				<![CDATA[
<style>body { font-family:"Segoe UI","Tahoma"; font-size: 75%; } h2 { font-family:"Segoe UI","Tahoma"; font-size: 105%; }</style>

<p>We now test against, and package with, Python 3.10.8.</p>
<p><strong>As a consequence of this we no longer support Windows 7.</strong><br>

<h2>Release 5.6.0</h2>
<p>Tha major reason for this release is to address the Live versus Legacy galaxy
split <a href="https://www.elitedangerous.com/news/elite-dangerous-update-14-and-beyond-live-and-legacy-modes" rel="nofollow">coming in Update 14 of the game</a>.
See the section "Update 14 and the Galaxy Split" below for how this might
impact you.</p>
<h2><a id="user-content-changes" class="anchor" aria-hidden="true" href="#changes"><span aria-hidden="true" class="octicon octicon-link"></span></a>Changes</h2>
<ul>
<li>
<p>We now test against, and package with, Python 3.10.8.</p>
</li>
<li>
<p>The code for sending data to EDDN has been reworked.  This changes the
'replay log' from utilising an internal array, backed by a flat file
(<code>replay.jsonl</code>), to an sqlite3 database.</p>
<p>As a result:</p>
<ol>
<li>Any messages stored in the old <code>replay.jsonl</code> are converted at startup,
if that file is present, and then the file removed.</li>
<li>All new messages are stored in this new sqlite3 queue before any attempt
is made to send them.  An immediate attempt is then made to send any
message not affected by "Delay sending until docked".</li>
<li>Sending of queued messages will be attempted every 5 minutes, unless
"Delay sending until docked" is active and the Cmdr is not docked in
their own ship.  This is in case a message failed to send due to an issue
communicating with the EDDN Gateway.</li>
<li>When you dock in your own ship an immediate attempt to send all queued
messages will be initiated.</li>
<li>When processing queued messages the same 0.4-second inter-message delay
as with the old code has been implemented.  This serves to not suddenly
flood the EDDN Gateway.  If any message fails to send for Gateway reasons,
i.e. not a bad message, then this processing is abandoned to wait for
the next invocation.</li>
</ol>
<p>The 5-minute timer in point 3 differs from the old code, where almost any
new message sending attempt could initiate processing of the queue.  At
application startup this delay is only 10 seconds.</p>
<p>Currently, the feedback of "Sending data to EDDN..." in the UI status line
has been removed.</p>
<p><strong>If you do not have "Delay sending until docked" active, then the only
messages that will be at all delayed will be where there was a communication
problem with the EDDN Gateway, or it otherwise indicated a problem other
than 'your message is bad'.</strong></p>
</li>
<li>
<p>As a result of this EDDN rework this application now sends appropriate
<code>gameversion</code> and <code>gamebuild</code> strings in EDDN message headers.
The rework was necessary in order to enable this, in case of any queued
or delayed messages which did not contain this information in the legacy
<code>replay.jsonl</code> format.</p>
</li>
<li>
<p>For EDSM there is a very unlikely set of circumstances that could, in theory
lead to some events not being sent.  This is so as to safeguard against
sending a batch with a gameversion/build claimed that does not match for
<em>all</em> of the events in that batch.</p>
<p>It would take a combination of "communications with EDSM are slow", more
events (the ones that would be lost), a game client crash, <em>and</em> starting
a new game client before the 'more events' are sent.</p>
</li>
</ul>
<h2><a id="user-content-update-14-and-the-galaxy-split" class="anchor" aria-hidden="true" href="#update-14-and-the-galaxy-split"><span aria-hidden="true" class="octicon octicon-link"></span></a>Update 14 and the Galaxy Split</h2>
<p>Due to the galaxy split <a href="https://www.elitedangerous.com/news/elite-dangerous-update-14-and-beyond-live-and-legacy-modes" rel="nofollow">announced by Frontier</a>
there are some changes to the major third-party websites and tools.</p>
<ul>
<li>
<p>Inara <a href="https://inara.cz/elite/board-thread/7049/463292/#463292" rel="nofollow">has chosen</a>
to only accept Live galaxy data on its API.</p>
<p>This application will not even process Journal data for Inara after
2022-11-29T09:00:00+00:00 <em>unless the <code>gameversion</code> indicates a Live client</em>.
This explicitly checks that the game's version is semantically equal to or
greater than '4.0.0'.</p>
<p>If a Live client is <em>not</em> detected, then there is an INFO level logging
message "Inara only accepts Live galaxy data", which is also set as the main
UI status line.  This message will repeat, at most, every 5 minutes.</p>
<p>If you continue to play in the Legacy galaxy only then you probably want to
just disable the Inara plugin with the checkbox on Settings &gt; Inara.</p>
</li>
<li>
<p>All batches of events sent to EDSM will be tagged with a <code>gameversion</code>, in
a similar manner to the EDDN header.</p>
<p>Ref: <a href="https://www.edsm.net/en/api-journal-v1" rel="nofollow">EDSM api-journal-v1</a></p>
</li>
<li>
<p>All EDDN messages will now have appropriate <code>gameversion</code> and <code>gamebuild</code>
fields in the <code>header</code> as per
<a href="https://github.com/EDCD/EDDN/blob/live/docs/Developers.md#gameversions-and-gamebuild">EDDN/docs/Developers.md</a>.</p>
<p>As a result of this you can expect third-party sites to choose to filter data
based on that.</p>
<p>Look for announcements by individual sites/tools as to what they have chosen
to do.</p>
</li>
</ul>
<h2><a id="user-content-known-bugs" class="anchor" aria-hidden="true" href="#known-bugs"><span aria-hidden="true" class="octicon octicon-link"></span></a>Known Bugs</h2>
<p>In testing if it had been broken at all due to 5.5.0 -&gt; 5.6.0 changes it has
come to light that <code>EDMC.EXE -n</code>, to send data to EDDN, was already broken in
5.5.0.</p>
<p>In addition, there is now some extra 'INFO' logging output which will be
produced by any invocation of <code>EDMC.EXE</code>.  This might break third-party use of
it, e.g. <a href="https://forums.frontier.co.uk/threads/trade-computer-extension-mk-ii.223056/" rel="nofollow">Trade Computer Extension Mk.II</a>.
This will be fixed as soon as the dust settles from Update 14, with emphasis
being on ensuring the GUI <code>EDMarketConnector.exe</code> functions properly.</p>
<h2><a id="user-content-notes-for-eddn-listeners" class="anchor" aria-hidden="true" href="#notes-for-eddn-listeners"><span aria-hidden="true" class="octicon octicon-link"></span></a>Notes for EDDN Listeners</h2>
<ul>
<li>
<p>Where EDMC sourced data from the Journal files it will set <code>gameversion</code>
and <code>gamebuild</code> as per their values in <code>Fileheader</code> or <code>LoadGame</code>, whichever
was more recent (there are some events that occur between these).</p>
</li>
<li>
<p><em>If any message was already delayed such that it did not
have the EDDN header recorded, then the <code>gameversion</code> and <code>gamebuild</code> will
be empty strings</em>.  In order to indicate this the <code>softwareName</code> will have
<code> (legacy replay)</code> appended to it, e.g. <code>E:D Market Connector Connector [Windows] (legacy replay)</code>.  In general this indicates that the message was
queued up using a version of EDMC prior to this one.  If you're only
interested in Live galaxy data then you might want to ignore such messages.</p>
</li>
<li>
<p>Where EDMC sourced data from a CAPI endpoint, the resulting EDDN message
will have a <code>gameversion</code> of <code>CAPI-&lt;endpoint&gt;</code> set, e.g. <code>CAPI-market</code>.
<strong>At this time it is not 100% certain which galaxy this data will be for, so
all listeners are advised to ignore/queue such data until this is clarified</strong>.</p>
<p><code>gamebuild</code> will be an empty string for all CAPI-sourced data.</p>
</li>
</ul>
<h2><a id="user-content-plugin-developers" class="anchor" aria-hidden="true" href="#plugin-developers"><span aria-hidden="true" class="octicon octicon-link"></span></a>Plugin Developers</h2>
<ul>
<li>There is a new flag in <code>state</code> passed to plugins, <code>IsDocked</code>.  See PLUGINS.md
for details.</li>
</ul>
<hr>

<h2>Release 5.5.0</h2>
<ul>
<li><a href="https://www.virustotal.com/gui/file/fadbbc742530863396dabc4813fe80103dd149b9e05e7df9fcbf13ed62f64b9b?nocache=1">Virus Total scan results</a> for this release.</li>
<li>We now test against, and package with, Python 3.10.7.</li>
<li>EDDN: Support added for the <code>FCMaterials</code> schemas to aid third-party sites in
offering searches for where to buy and sell Odyssey Micro Resources,
including on Fleet Carriers with the bar tender facility.</li>
</ul>
<h2><a id="user-content-bug-fixes" class="anchor" aria-hidden="true" href="#bug-fixes"><span aria-hidden="true" class="octicon octicon-link"></span></a>Bug Fixes</h2>
<ul>
<li>EDDN: Abort <code>fsssignaldiscovered</code> sending of message if no signals passed
the checks.</li>
<li>EDDN: Add Horizons check for location on <code>fsssignaldiscovered</code> messages.</li>
<li>Don't alert the user if the first attempted load of <code>NavRoute.json</code> contains
no route.</li>
<li>Inara: Don't set <code>marketID</code> for <code>ApproachSettlement</code> unless it's actually
present in the event.</li>
</ul>
<h2><a id="user-content-plugin-developers" class="anchor" aria-hidden="true" href="#plugin-developers"><span aria-hidden="true" class="octicon octicon-link"></span></a>Plugin Developers</h2>
<ul>
<li>
<p>We now build using the new, <code>setuptools</code> mediated py2exe <code>freeze()</code> method,
so we're in the clear for when <code>distutils</code> is removed in Python 3.12.</p>
<p>This shouldn't have any adverse effects on plugins, i.e. all of the same
Python modules are still packaged as before.</p>
</li>
<li>
<p>Support has been added for the <code>NavRouteClear</code> event.  We <em>do</em> send this
through to plugins, so that they know the player has cleared the route,
<strong>but we keep the previously plotted route details in <code>state['NavRoute']</code>.</strong></p>
</li>
<li>
<p>The documentation of the return type of <code>journal_entry()</code> has been corrected
to <code>Optional[str]</code>.</p>
</li>
<li>
<p>FDevIDs files (<code>commodity.csv</code> <code>rare_commodity.csv</code>) updated to latest
versions.</p>
</li>
</ul>
<h2><a id="user-content-developers" class="anchor" aria-hidden="true" href="#developers"><span aria-hidden="true" class="octicon octicon-link"></span></a>Developers</h2>
<ul>
<li>We now build using the new, <code>setuptools</code> mediated py2exe <code>freeze()</code> method,
so we're in the clear for when <code>distutils</code> is removed in Python 3.12.</li>
<li>The old <code>setup.py</code> file, along with associated <code>py2exe.cmd</code> have been removed
in favour of the new <code>Build-exe-and-msi.py</code> file.  Documentation updated.</li>
</ul>
<hr>

<h2>Release 5.4.1</h2>
<ul>
<li>
<p>If for any reason <code>EDMarketConnector.exe</code> fails to shutdown and exit when
asked to by the upgrade process this should no longer result in a spontaneous
system reboot.  Closes <a href="https://github.com/EDCD/EDMarketConnector/issues/1492">#1492</a>.</p>
<p>A manual reboot will still be required to complete the EDMarketConnector
upgrade process and we make no guarantees about the stability of the
application until this is done.</p>
</li>
<li>
<p>The new EDDN <code>fsssignaldiscovered/1</code> schema has been implemented.</p>
</li>
<li>
<p>EDSM trace level logging will no longer log API credentials unless explicitly
asked to, separately from other EDSM API trace logging.</p>
</li>
</ul>
<h2>
<a id="user-content-bug-fixes" class="anchor" href="#bug-fixes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Bug Fixes</h2>
<ul>
<li>EDDN: Ensure we always remove all <code>_Localised</code> suffix keys in data.  This
was missed in some recent new schemas and turned out to be an issue for at
least <code>approachsettlement/1</code>.</li>
</ul>
<hr>

<h2>Release 5.4.0</h2>
<ul>
<li>We now test against, and package with, Python 3.10.4.</li>
<li>New EDDN schema <code>fssbodysignals</code> is now supported.</li>
<li>Odyssey Update 12 will add <code>BodyID</code> to <code>CodexEntry</code> journal events, so don't
overwrite this with an augmentation if it is already present.  We've also
added the same for <code>BodyName</code> in case Frontier ever add that.</li>
<li>
<a href="https://github.com/EDCD/EDMarketConnector/issues/24">Translations</a> updated.
Thanks again to all the contributors.</li>
</ul>
<h2>
<a id="user-content-bug-fixes" class="anchor" href="#bug-fixes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Bug Fixes</h2>
<ul>
<li>Cross-check the <code>MarketID</code> in CAPI data, not only the station name, to ensure
the data is for the correct station.  Closes <a href="https://github.com/EDCD/EDMarketConnector/issues/1572">#1572</a>.</li>
<li>Location cross-check paranoia added to several EDDN message types to ensure
no bad data is sent.</li>
<li>Ensure we don't send bad BodyID/Name for an orbital station if the player
uses a taxi.
Closes <a href="https://github.com/EDCD/EDMarketConnector/issues/1522">#1522</a>.</li>
</ul>
<h2>
<a id="user-content-developers" class="anchor" href="#developers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Developers</h2>
<ul>
<li>Odyssey Update 12 adds a new Journal event, and file, <code>FCMaterials.json</code>,
detailing the available trades at a Fleet Carrier's bar tender.  Support has
been added for this.  Plugin developers are sent an <code>FCMaterials</code> event
with the full contents of the file.</li>
</ul>
<h2>
<a id="user-content-edmcexe" class="anchor" href="#edmcexe" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>EDMC.exe</h2>
<p>This now uses specific exit codes in all cases, rather than a generic
<code>EXIT_SYS_ERR</code> (6) for some cases.  See the appropriate line in EDMC.py for
details.</p>


<h2>Release 5.3.4</h2>
<p>Whilst EDMarketConnector.exe was fixed for the Odyssey Update 11 difference in Journal file names, EDMC.exe was not.   If you're wondering, that's the command-line utility that, for instance, Trade Computer Extensions uses to obtain data.</p>
<ul>
<li>Use the new common function for finding latest journal file in EDMC.py.</li>
<li>Quietens some NavRoute related logging for the benefit of EDMC.py.  This is
now at DEBUG level, rather than INFO.</li>
</ul>


<h2>Release 5.3.3</h2>
<p>Unfortunately 5.3.2 failed to fully address the issues caused by the different
Journal filenames when using the Odyssey Update 11 client.  It's fine if you
run EDMarketConnector first and <em>then</em> the game, as the code path that detects
a new file always does just that.</p>
<p>But the code for EDMarketConnector startup to find the current newest Journal
file relied on sorting the filenames and that would mean the new-style names
would always sort as 'oldest'.</p>
<p>This release fixes that code to properly use the file modification timestamp
to determine the newest file on startup.</p>


<h2>Release 5.3.2</h2>
<p>This release contains one change to cope with how Frontier decided to name
the Journal files differently in the Update 11 Odyssey client.</p>


<h2>Release 5.3.1</h2>
<p>This release addresses some issues with newer EDDN code which could cause    erroneous alerts to the player, or sending of bad messages.</p>                 <ul>                                                                            <li>                                                                            <p>EDDN: Cope with <code>ApproachSettlement</code> on login occurring before <code>Location</code>,
such that we don't yet know the name of the star system the player is in.</p>   <p>Closes <a href="https://github.com/EDCD/EDMarketConnector/pull/1484">#1484</a></p>
</li>                                                                           <li>                                                                            <p>EDDN: Cope with <code>ApproachSettlement</code> missing planetary coordinates on login
at/near a settlement in Horizons.</p>                                           <p>Closes <a href="https://github.com/EDCD/EDMarketConnector/pull/1476">#1476</a></p>
</li>                                                                           <li>                                                                            <p>EDDN: Change the <code>CodexEntry</code> "empty string" checks to only apply to those
values where the schema enforces "must be at least one character".</p>          <p>This prevents the big 'CodexEntry had empty string, PLEASE ALERT THE EDMC    DEVELOPERS' message from triggering on, e.g. <code>NearestDestination</code> being
empty, which the schema allows.</p>                                             <p>Closes <a href="https://github.com/EDCD/EDMarketConnector/issues/1481">#1481</a></p>
</li>                                                                           </ul>                                                                           <h2>                                                                            <a id="user-content-plugin-developers" class="anchor" href="#plugin-developers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Plugin Developers</h2>
<ul>                                                                            <li>
<p>If you use a sub-class for a widget the core code will no longer break if
your code raises an exception.  e.g. a plugin was failing due to Python
3.10 using <code>collections.abc</code> instead of <code>collections</code>, and the plugin's
custom widget had a <code>configure()</code> method which was called by the core
theme code on startup or theme change.  This then caused the whole
application UI to never show up on startup.</p>
<p>This also applies if you set up a button such that enter/leave on it, i.e.
mouse in/out, causes the <code>theme.py</code> code for that to trigger.</p>
<p>So, now in such cases the main UI should actually show up, although your
plugin's UI might look weird due to theming not being properly applied.</p>
<p>The plugin exception <strong>WILL</strong> be logged, at ERROR level.</p>
</li>
</ul>


<h2>Release 5.3.0</h2>
<p>As has sadly become routine now, please read
<a href="https://github.com/EDCD/EDMarketConnector/wiki/Troubleshooting#installer-and-or-executables-flagged-as-malicious-viruses">our statement about malware false positives</a>
affecting our installers and/or the files they contain.  We are as confident
as we can be, without detailed auditing of python.org's releases and all
the py2exe source and releases, that there is no malware in the files we make
available.</p>
<p>This release is primarily aimed at fixing some more egregious bugs,
shortcomings and annoyances with the application.  It also adds support for
two additional
<a href="https://github.com/EDCD/EDDN/blob/live/README.md">EDDN</a>
schemas.</p>
<ul>
<li>
<p>We now test and build using Python 3.10.2.  We do not <em>yet</em> make use of any
features specific to Python 3.10 (or 3.9).  Let us restate that we
absolutely reserve the right to commence doing so.</p>
</li>
<li>
<p>We now set a custom User-Agent header in all web requests, i.e. to EDDN,
EDSM and the like.  This is of the form:</p>
<p><code>EDCD-EDMarketConnector-&lt;version&gt;</code></p>
</li>
<li>
<p>"File" -&gt; "Status" will now show the new Odyssey ranks, both the new
categories and the new 'prestige' ranks, e.g. 'Elite I'.</p>
<p><strong>NB: Due to an oversight there are currently no translations for these.</strong></p>
<p>Closes <a href="https://github.com/EDCD/EDMarketConnector/issues/1369">#1369</a>.</p>
</li>
<li>
<p>Running <code>EDMarketConnector.exe --reset-ui</code> will now also reset any changes to
the application "UI Scale" or geometry (position and size).</p>
<p>Closes <a href="https://github.com/EDCD/EDMarketConnector/issues/1155">#1155</a>.</p>
</li>
<li>
<p>We now use UTC-based timestamps in the application's log files.  Prior to
this change it was the "local time", but without any indication of the
applied timezone.  Each line's timestamp has <code> UTC</code> as a suffix now.  We
are assuming that your local clock is correct <em>and</em> the timezone is set
correctly, such that Python's <code>time.gmtime()</code> yields UTC times.</p>
<p>This should make it easier to correlate application logfiles with in-game
time and/or third-party service timestamps.</p>
</li>
<li>
<p>The process used to build the Windows installers should now always pick up
all the necessary files automatically.  Prior to this we used a manual
process to update the installer configuration which was prone to both user
error and neglecting to update it as necessary.</p>
</li>
<li>
<p>If the application fails to load valid data from the <code>NavRoute.json</code> file
when processing a Journal <code>NavRoute</code> event, it will attempt to retry this
operation a number of times as it processes subsequent Journal events.</p>
<p>This should hopefully work around a race condition where the game might
not have yet updated <code>NavRoute.json</code> at all, or has truncated it to empty,
when we first attempt this.</p>
<p>We will also now <em>NOT</em> attempt to load <code>NavRoute.json</code> during the startup
'Journal catch-up' mode, which only sets internal state.</p>
<p>Closes <a href="https://github.com/EDCD/EDMarketConnector/issues/1155">#1348</a>.</p>
</li>
<li>
<p>Inara: Use the <code>&lt;journal log&gt;-&gt;Statistics-&gt;Bank_Account-&gt;Current_Wealth</code>
value when sending a <code>setCommanderCredits</code> message to Inara to set
<code>commanderAssets</code>.</p>
<p>In addition, a <code>setCommanderCredits</code> message at game login <strong>will now only
ever be sent at game login</strong>.  Yes, you will <strong>NEED</strong> to relog to send an
updated balance.  This is the only way in which to sanely keep the
'Total Assets' value on Inara from bouncing around.</p>
<p>Refer to <a href="https://inara.cz/inara-api-docs/#event-1" rel="nofollow">Inara:API:docs:setCommanderCredits</a>.</p>
<p>Closes <a href="https://github.com/EDCD/EDMarketConnector/issues/1401">#1401</a>.</p>
</li>
<li>
<p>Inara: Send a <code>setCommanderRankPilot</code> message when the player logs in to the
game on-foot.  Previously you would <em>HAVE</em> to be in a ship at login time
for this to be sent.</p>
<p>Thus, you can now relog on-foot in order to update Inara with any Rank up
or progress since the session started.</p>
<p>Closes <a href="https://github.com/EDCD/EDMarketConnector/issues/1378">#1378</a>.</p>
</li>
<li>
<p>Inara: Fix for always sending a Rank Progress of 0%.</p>
<p>Closes <a href="https://github.com/EDCD/EDMarketConnector/issues/1378">#1378</a>.</p>
</li>
<li>
<p>Inara: You should once more see updates for any materials used in
Engineering.  The bug was in our more general Journal event processing
code pertaining to <code>EngineerCraft</code> events, such that the state passed to
the Inara plugin hadn't been updated.</p>
<p>Such updates should happen 'immediately', but take into account that there
can be a delay of up to 35 seconds for any data sent to Inara, due to how
we avoid breaking the "2 messages a minute" limit on the Inara API.</p>
<p>Closes <a href="https://github.com/EDCD/EDMarketConnector/issues/1395">#1395</a>.</p>
</li>
<li>
<p>EDDN: Implement new <a href="https://github.com/EDCD/EDDN/blob/live/schemas/approachsettlement-README.md">approachsettlement/1</a>
schema.</p>
</li>
<li>
<p>EDDN: Implement new <a href="https://github.com/EDCD/EDDN/blob/live/schemas/fssallbodiesfound-README.md">fssallbodiesfound/1</a>
schema.</p>
</li>
<li>
<p>EDDN: We now compress all outgoing messages.  This might help get some
particularly large <code>navroute</code> messages go through.</p>
<p>If any message is now rejected as 'too large' we will drop it, and thus
not retry it later.  The application logs will reflect this.</p>
<p>NB: The EDDN Gateway was updated to allow messages up to 1 MiB in size
anyway.  The old limit was 100 KiB.</p>
<p>Closes <a href="https://github.com/EDCD/EDMarketConnector/issues/1390">#1390</a>.</p>
</li>
<li>
<p>EDDN: In an attempt to diagnose some errors observed on the EDDN Gateway
with respect to messages sent from this application some additional checks
and logging have been added.</p>
<p><strong>NB: After some thorough investigation it was concluded that these EDDN
errors were likely the result of long-delayed messages due to use of
the "Delay sending until docked" option.</strong></p>
<p>There should be no functional changes for users.  But if you see any of
the following in this application's log files <strong>PLEASE OPEN
<a href="https://github.com/EDCD/EDMarketConnector/issues/new?assignees=&amp;labels=bug%2C+unconfirmed&amp;template=bug_report.md&amp;title=">AN ISSUE ON GITHUB</a>
with all the requested information</strong>, so that we can correct the relevant
code:</p>
<ul>
<li><code>No system name in entry, and system_name was not set either!  entry: ...</code></li>
<li><code>BodyName was present but not a string! ...</code></li>
<li><code>post-processing entry contains entry ...</code></li>
<li><code>this.body_id was not set properly: ...</code></li>
<li><code>system is falsey, can't add StarSystem</code></li>
<li><code>this.coordinates is falsey, can't add StarPos</code></li>
<li><code>this.systemaddress is falsey, can't add SystemAddress</code></li>
<li><code>this.status_body_name was not set properly: ...</code></li>
</ul>
<p>You might also see any of the following in the application status text
(bottom of the window):</p>
<ul>
<li><code>passed-in system_name is empty, can't add System</code></li>
<li><code>CodexEntry had empty string, PLEASE ALERT THE EDMC DEVELOPERS</code></li>
<li><code>system is falsey, can't add StarSystem</code></li>
<li><code>this.coordinates is falsey, can't add StarPos</code></li>
<li><code>this.systemaddress is falsey, can't add SystemAddress</code></li>
</ul>
<p>Ref: <a href="https://github.com/EDCD/EDMarketConnector/issues/1403">#1403</a>
<a href="https://github.com/EDCD/EDMarketConnector/issues/1393">#1393</a>.</p>
</li>
</ul>
<h2>
<a id="user-content-translations" class="anchor" href="#translations" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Translations</h2>
<ul>
<li>
<p>Use a different workaround for OneSky (translations website) using "zh-Hans"
for Chinese (Simplified), whereas Windows will call this "zh-CN". This is
in-code and documented with a comment, as opposed to some 'magic' in the
Windows Installer configuration that had no such documentation. It's less
fragile than relying on that, or developers using a script/documented
process to rename the file.</p>
</li>
<li>
<p>As noted above we forgot to upload to
<a href="https://marginal.oneskyapp.com/collaboration/project/52710" rel="nofollow">OneSky</a>
after adding the Odyssey new ranks/categories.  This has now been done,
and some new phrases await translation.</p>
</li>
</ul>

<h2>Release 5.2.4</h2>
<p>This is a <em>very</em> minor update that simply imports the latest versions of
data files so that some niche functionality works properly.</p>
<ul>
<li>
<p>Update <code>commodity.csv</code> and <code>rare_commodity.csv</code> from the latest
<a href="https://github.com/EDCD/FDevIDs">EDCD/FDevIDs</a> versions.  This addresses
an issue with export of market data in Trade Dangerous format containing
<code>OnionHeadC</code> rather than the correct name, <code>Onionhead Gamma Strain</code>, that
Trade Dangerous is expecting.</p>
<p>This will only have affected Trade Dangerous users who use EDMarketConnector
as a source of market data.</p>
</li>
</ul>
<hr>

<h2>Release 5.2.3</h2>
<p>This release fixes one bug and fixes some example code.</p>
<ul>
<li>
<p>Odyssey changed the order of some Journal events.  This caused our logic
for tracking the following to break, and thus not report them ever to Inara:</p>
<ul>
<li>Ship Combat, Trade and Exploration ranks.</li>
<li>On-foot Combat and Exobiologist ranks.</li>
<li>Engineer unlocks and progress.</li>
<li>Reputations with Major Factions (Superpowers).</li>
</ul>
<p>This is now fixed and the current state of all of these will be correctly
reported to Inara if you have API access for it configured.</p>
</li>
</ul>
<h2>
<a id="user-content-developers" class="anchor" href="#developers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Developers</h2>
<ul>
<li>
<p>Now built using Python 3.9.9.</p>
</li>
<li>
<p>Updated <a href="https://github.com/EDCD/EDMarketConnector/blob/main/PLUGINS.md#packaging-extra-modules">PLUGINS.md</a>
to state that we don't actually include <em>all</em> of Python's standard library.</p>
</li>
<li>
<p>The <a href="https://github.com/EDCD/EDMarketConnector/tree/main/docs/examples/click_counter">click_counter</a>
example plugin code has been corrected to both actually work fully, and pass
our linting.</p>
</li>
</ul>


<h2>Release 5.2.2</h2>
<p>This release adds one new feature and addresses some bugs.  We've also
updated to using Python 3.9.8.</p>
<ul>
<li>
<p>Windows now has "minimize to system tray" support.</p>
<ul>
<li>The system tray icon will always be present.</li>
<li>There is a new option on the Settings &gt; Appearance tab -
<code>Minimize to system tray</code>.</li>
<li>When this new option is active, minimizing the application will <em>also</em>
hide the taskbar icon.</li>
<li>When the new option is not active, the application will minimize to the
taskbar as normal.</li>
</ul>
</li>
</ul>
<h2>
<a id="user-content-bug-fixex" class="anchor" href="#bug-fixex" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Bug Fixex</h2>
<ul>
<li>
<p>If a CAPI query failed in such a way that no <code>requests.Response</code> object
was made available we attempted to blindly dump the non-existent object.<br>
We now check that it actually exists, and log the specifics of the exception.</p>
</li>
<li>
<p>A user experienced the game writing a NavRoute.json file without a
<code>Route</code> array, which caused the application to attempt sending a badly formed
<code>navroute</code> message to EDDN.  That message was then remembered and constantly
retried.</p>
<ul>
<li>
<p>We now sanity check the NavRoute.json contents to be sure there <em>is</em> a
<code>Route</code> array, even if it is empty.  If it's not present no attempt
to send the EDDN message will be made.</p>
<p>If this scenario occurs the user will see a status line message <code>No  'Route' array in NavRoute.json contents</code>.</p>
</li>
<li>
<p>For any EDDN message that receives a 400 status back we will drop it
from the replay log.</p>
</li>
</ul>
</li>
</ul>
<hr>

<h2>Release 5.2.1</h2>
<p>This release primarily addresses the issue of the program asking for
Frontier authorization much too often.</p>
<ul>
<li>Actually utilise the Frontier Refresh Token when the CAPI response is
"Unauthorized".  The re-factoring of this code to make CAPI queries
threaded inadvertently prevented this.</li>
</ul>

<h2>Release 5.2.0</h2>
<ul>
<li>
<p>The 'Update' button is disabled if CQC/Arena is detected.</p>
</li>
<li>
<p>Frontier CAPI queries now run in their own thread.  There should be no
change in functionality for users.   This affects both EDMarketConnector
(GUI) and EDMC (command-line).</p>
</li>
<li>
<p><code>File</code> &gt; <code>Status</code> will now use cached CAPI data, rather than causing a fresh
query.  <strong>Currently if data has not yet been cached nothing will happen when
trying to use this</strong>.</p>
</li>
<li>
<p>Trying to use <code>File</code> &gt; <code>Status</code> when the current commander is unknown, or
there is has been no CAPI data retrieval yet, will now result in the 'bad'
sound being played and an appropriate status line message.</p>
</li>
<li>
<p><code>File</code> &gt; <code>Save Raw Data</code> also now uses the cached CAPI data, rather than
causing a fresh query.  This will write an empty JSON <code>{}</code> if no data is
yet available.</p>
</li>
<li>
<p>New <a href="docs/Licenses/">docs/Licenses/</a> directory containing all relevant
third-party licenses for the software this application uses.</p>
</li>
<li>
<p><code>Settings</code> &gt; <code>Output</code> &gt; <code>File Location</code> 'Browse' button will now always be
available, even if no output options are active.</p>
</li>
<li>
<p>The 'no git installed' logging when running from source is now at INFO
level, not ERROR.  This will look less scary.</p>
</li>
<li>
<p>EDMarketConnetor command-line arguments have been re-ordered into
logical groups for <code>--help</code> output.</p>
</li>
<li>
<p>Support added for several new EDDN schemas relating to specific Journal
events.  The live EDDN server has been updated to support these.</p>
<p>Schema support added for:</p>
<ul>
<li><code>codexentry/1</code></li>
<li><code>fssdiscoveryscan/1</code></li>
<li><code>navbeaconscan/1</code></li>
<li><code>navroute/1</code></li>
<li><code>scanbarycentre/1</code></li>
</ul>
</li>
<li>
<p>If a message to EDDN gets an 'unknown schema' response it will <strong>NOT</strong> be
saved in the replaylog for later retries, instead being discarded.</p>
</li>
</ul>
<h2>
<a id="user-content-bug-fixes" class="anchor" href="#bug-fixes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Bug Fixes</h2>
<ul>
<li>
<p>Pressing the 'Update' button when in space (not docked, not on a body
surface) will no longer cause a spurious "Docked but unknown station: EDO
Settlement?" message.</p>
</li>
<li>
<p>A bug preventing <code>--force-localserver-auth</code> from working has been fixed.</p>
</li>
<li>
<p><code>horizons</code> and <code>odyssey</code> flags should now always be set properly on <em>all</em>
EDDN messages.  The <code>horizons</code> flag was missing from some.</p>
</li>
</ul>
<h2>
<a id="user-content-developers" class="anchor" href="#developers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Developers</h2>
<ul>
<li>
<p>Now built using Python 3.9.7.</p>
</li>
<li>
<p>New <code>journal_entry_cqc()</code> function for plugins to receive journal events
<em>specifically and <strong>only</strong> when the player is in CQC/Arena</em>.  This allows
for tracking things that happen in CQC/Arena without polluting
<code>journal_entry()</code>.  See <a href="PLUGINS.md">PLUGINS.md</a> for details.</p>
</li>
<li>
<p>Command-line argument <code>--trace-all</code> to force all possible <code>--trace-on</code> to be
active.</p>
</li>
<li>
<p>Contributing.md has been updated for how to properly use <code>trace_on()</code>.</p>
</li>
<li>
<p>EDMC.(py,exe) now also makes use of <code>--trace-on</code>.</p>
</li>
<li>
<p>EDMarketConnector now has <code>--capi-pretend-down</code> to act as if the CAPI
server is down.</p>
</li>
<li>
<p>Killswitches now have support for removing key/values entirely, or forcing
the value.  See <a href="docs/Killswitches.md">docs/Killswitches.md</a> for details.</p>
</li>
<li>
<p><code>state['Odyssey']</code> added, set from <code>LoadGame</code> journal event.</p>
</li>
<li>
<p>You can now test against a different EDDN server using <code>--eddn-url</code>
command-line argument.  This needs to be the <em>full</em> 'upload' URL, i.e. for
the live instance this is <code>https://eddn.edcd.io:4430/upload/</code>.</p>
</li>
<li>
<p>New command-line argument <code>--eddn-tracking-ui</code> to track the EDDN plugin's
idea of the current BodyName and BodyID, from both the Journal and
Status.json.</p>
</li>
</ul>

<h2>Release 5.1.3</h2>
<ul>
<li>
<p>Attempt to flush any pending EDSM API data when a Journal <code>Shutdown</code> or
<code>Fileheader</code> event is seen.  After this, the data is dropped.  This ensures
that, if the user next logs in to a different commander, the data isn't then
sent to the wrong EDSM account.</p>
</li>
<li>
<p>Ensure a previous Journal file is fully read/drained before starting
processing of a new one.  In particular, this ensures properly seeing the end
of a continued Journal file when opening the continuation file.</p>
</li>
<li>
<p>New config options, in a new <code>Privacy</code> tab, to hide the current Private
Group, or captain of a ship you're multi-crewing on.  These usually appear
on the <code>Commander</code> line of the main UI, appended after your commander name,
with a <code>/</code> between.</p>
</li>
<li>
<p>EDO dockable settlement names with <code>+</code> characters appended will no longer
cause 'server lagging' reports.</p>
</li>
<li>
<p>Don't force DEBUG level logging to the
<a href="https://github.com/EDCD/EDMarketConnector/wiki/Troubleshooting#plain-log-file">plain log file</a>
if <code>--trace</code> isn't used to force TRACE level logging.  This means logging
<em>to the plain log file</em> will once more respect the user-set Log Level, as in
the Configuration tab of Settings.</p>
<p>As its name implies, the <a href="https://github.com/EDCD/EDMarketConnector/wiki/Troubleshooting#debug-log-files">debug log file</a>
will always contain at least DEBUG level logging, or TRACE if forced.</p>
</li>
</ul>
<h2>
<a id="user-content-plugin-developers" class="anchor" href="#plugin-developers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>(Plugin) Developers</h2>
<ul>
<li>
<p>New EDMarketConnector option <code>--trace-on ...</code> to control if certain TRACE
level logging is used or not.  This helps keep the noise down whilst being
able to have users activate choice bits of logging to help track down bugs.</p>
<p>See <a href="Contributing.md#use-the-appropriate-logging-level">Contributing.md</a> for
details.</p>
</li>
<li>
<p>Loading of <code>ShipLocker.json</code> content is now tried up to 5 times, 10ms apart,
if there is a file loading, or JSON decoding, failure.  This should
hopefully result in the data being loaded correctly if a race condition with
the game client actually writing to and closing the file is encountered.</p>
</li>
<li>
<p><code>config.get_bool('some_str', default=SomeDefault)</code> will now actually honour
that specified default.</p>
</li>
</ul>

<h2>Release 5.1.2</h2>
<ul>
<li>
<p>A Journal event change in EDO Update 6 will have caused some translated
suit names to not be properly mapped to their sane versions.  This change
has now been addressed and suit names should always come out as intended in
the EDMarketConnector.exe UI.</p>
</li>
<li>
<p>There is a new command-line argument to cause all Frontier Authorisation to
be forgotten:  <code>EDMarketConnector.exe --forget-frontier-auth</code>.</p>
</li>
<li>
<p>Situations where Frontier CAPI data doesn't agree on the location we have
tracked from Journal events will now log more useful information.</p>
</li>
</ul>
<h2>
<a id="user-content-bug-fixes" class="anchor" href="#bug-fixes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Bug Fixes</h2>
<ul>
<li>The code should now be robust against the case of any Journal event name
changing.</li>
</ul>
<h2>
<a id="user-content-plugin-developers" class="anchor" href="#plugin-developers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Plugin Developers</h2>
<ul>
<li>
<p>We now store <code>GameLanguage</code>, <code>GameVersion</code> and <code>GameBuild</code> in the <code>state</code>
passed to <code>journal_entry()</code> from the <code>LoadGame</code> event.</p>
</li>
<li>
<p>Various suit data, i.e. class and mods, is now stored from relevant
Journal events, rather than only being available from CAPI data.  In
general we now consider the Journal to be the canonical source of suit
data, with CAPI only as a backup.</p>
</li>
<li>
<p>Backpack contents should now track correctly if using the 'Resupply' option
available on the ship boarding menu.</p>
</li>
<li>
<p>We now cache the main application version when first determined, so
that subsequent references to <code>config.appversion()</code> won't cause extra log
spam (which was possible when, e.g. having a git command but using non-git
source).</p>
</li>
</ul>

<h2>Release 5.1.1</h2>
<p>The big change in this is adjustments to be in line with Journal changes in
Elite Dangerous Odyssey 4.0.0.400, released 2021-06-10, with respect to the
Odyssey materials Inventory.</p>
<p><strong>This update is mandatory if you want EDMarketConnector to update Inara.cz
with your Odyssey inventory.</strong></p>
<ul>
<li>
<p><code>ShipLockerMaterials</code> is dead, long live <code>ShipLocker</code>.  Along with other
changes to how backpack inventory is handled we should now actually be
able to fully track all Odyssey on-foot materials and consumables without
errors.</p>
</li>
<li>
<p>Inara plugin adjusted to send the new <code>ShipLocker</code> inventory to Inara.cz.
This is <em>still</em> only your <em>ship</em> inventory of Odyssey materials, not
anything currently in your backpack whilst on foot.
See <a href="https://github.com/EDCD/EDMarketConnector/issues/1162">this issue</a>
for some quotes from Artie (Inara.cz developer) about <em>not</em> including
backpack contents in the Inara inventory.</p>
</li>
<li>
<p>Errors related to sending data to EDDN are now more specific to aid in
diagnoising issues.</p>
</li>
<li>
<p>Quietened some log output if we encounter connection errors trying to
utilise the Frontier CAPI service.</p>
</li>
</ul>
<h2>
<a id="user-content-translations" class="anchor" href="#translations" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Translations</h2>
<p>We believe that nothing should be worse in this version compared to 5.1.1,
although a small tweak or two might have leaked through.</p>
<p>We'll be fully addressing translations in a near-future release after we've
conclude the necessary code level work for the new system.  Nothing should
change for those of you helping on OneSky, other than at most the
'comments' on each translation.  They should be more useful!</p>
<p>Pending that work we've specifically chosen <em>not</em> to update any
translations in this release, so they'll be the same as released in 5.1.0.</p>
<h2>
<a id="user-content-bug-fixes" class="anchor" href="#bug-fixes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Bug Fixes</h2>
<ul>
<li>
<p>Handle where the <code>Backpack.json</code> file for a <code>Backpack</code> event is a zero length
file.  Closes #1138.</p>
</li>
<li>
<p>Fixed case of 'Selection' in 'Override Beta/Normal Selection' text on
Settings &gt; Configuration.  This allows translations to work.</p>
</li>
</ul>
<h2>
<a id="user-content-plugin-developers" class="anchor" href="#plugin-developers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Plugin Developers</h2>
<ul>
<li>
<p>We've updated <a href="./Contributing.md">Contributing.md</a> including:</p>
<ol>
<li>Re-ordered the sections to be in a more logcial and helpful order.</li>
<li>Added a section about choosing an appropriate log level for messages.</li>
<li>fstrings now mandatory, other than some use of <code>.format()</code> with respect to
translated strings.</li>
</ol>
</li>
<li>
<p><a href="./docs/Translations.md">docs/Translations.md</a> updated about a forthcoming
change to how we can programmatically check that all translation strings
have a proper comment in 'L10n/en.template' to aid translators.</p>
</li>
<li>
<p><code>state</code> passed to <code>journal_entry()</code> now has <code>ShipLockerJSON</code> which contains
the <code>json.load()</code>-ed data from the new 'ShipLocker.json' file.  We do
attempt to always load from this file, even when the <code>ShipLocker</code> Journal
event itself contains all of the data (which it does on startup, embark and
disembark), so it <em>should</em> always be populated when plugins see any event
related to Odyssey inventory.</p>
</li>
</ul>


<h2>Release 5.1.0</h2>
<ul>
<li>
<p>Updates to how this application utilises the Inara.cz API.</p>
<ol>
<li>The current state of your ShipLockerMaterials (MicroResources for Odyssey
Suit and handheld Weapons upgrading and engineering) will now be sent.
Note that we can't reliably track this on the fly, so it will only
update when we see a full <code>ShipLockerMaterials</code> Journal event, such as
at login or when you disembark from any vehicle.</li>
<li>Odyssey Suits and their Loadouts will now be sent.</li>
<li>When you land on a body surface, be that in your own ship, in a Taxi,
or in a Dropship.  Depending on the exact scenario a Station might be
sent along with this.</li>
</ol>
</li>
<li>
<p>You can now both edit the 'normal' and 'beta' coriolis.io URLs, and
choose which of them are used.  'Auto' means allowing the application to
use the normal one when you're running the live game, or the beta version
if running a beta version of the game.</p>
</li>
<li>
<p>Suit names will now be displayed correctly when we have pulled the data
from the Frontier CAPI, rather than Journal entries.</p>
</li>
<li>
<p>Many translations updated once more, especially for new strings.  Thanks
as always to those contributing!</p>
</li>
</ul>
<h2>
<a id="user-content-bug-fixes" class="anchor" href="#bug-fixes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Bug Fixes</h2>
<ul>
<li>Don't assume we have an EDSM Commander Name and/or API key just because
we know a game Commander name.  This came to light during the
investigation of
"<a href="https://github.com/EDCD/EDMarketConnector/issues/1134">EDSM Plugin sent wrong credit balance when switching accounts</a>".
We're still investigating that bug report.</li>
</ul>
<h2>
<a id="user-content-plugin-developers" class="anchor" href="#plugin-developers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Plugin Developers</h2>
<p>There are some new members of the <code>state</code> dictionary passed to
<code>journal_entry()</code>; Taxi, Dropship, Body and BodyType.  See
<a href="./PLUGINS.md">PLUGINS.md</a> for the details.</p>

<h2>Release 5.0.4</h2>
<p>This is a minor bugfix release, ensuring that Odyssey Suit names (and loadout)
will actually display if you're in your ship on login and never leave it.</p>
<p>NB: This still requires a Frontier CAPI data pull, either automatically
because you're docked if you have that option set, or by pressing the
'Update' button.  We can't display data when we don't have it from either
CAPI or Journal sources.  You'll also see '<code>&lt;Unknown&gt;</code>' between the time we
see the Journal LoadGame event during login and when there's either a
Journal suit-related event, or a CAPI data pull completes.</p>


<h2>Release 5.0.3</h2>
<ul>
<li>
<p>You can now click on a 'cell' in the "File" &gt; "Status" popup to copy that
text to the clipboard.  This was a relatively easy, and non-intrusive, code
change.  We'll look at richer, fuller, copy functionality in the future.</p>
</li>
<li>
<p>Suit names, for all grades, should now be displaying as just the relevant
word, never a symbol, and with the redundant 'suit' word(s) from all
languages removed.  Note that Frontier have <em>not</em> translated the
following, so neither do we: "Artemis", "Dominator", "Maverick".  The 'Flight
Suit' should, approximately, use the Frontier-supplied translation for
'Flight' in this context.  In essence the displayed name is now as short
as possible whilst disambiguating the suit names from each other.</p>
</li>
</ul>
<h2>
<a id="user-content-bug-fixes" class="anchor" href="#bug-fixes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Bug Fixes</h2>
<ul>
<li>
<p>The check for "source, but with extra changes?" in appversion will now
not cause an error if the "git" command isn't available.  Also, the extra
text added to the build number is now ".DIRTY".</p>
</li>
<li>
<p>Actually properly handle the "you just made progress" version of the
<code>EngineerProgress</code> Journal event, so that it doesn't throw errors.</p>
</li>
</ul>
<h2>
<a id="user-content-plugin-developers" class="anchor" href="#plugin-developers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Plugin Developers</h2>
<ul>
<li>
<p>The backpack and ship locker tracking of micro-resources <strong>might</strong> now
actually be correct with respect to 'reality' in-game.  This is in part
thanks to Frontier changes to some events in 4.0.0.200.</p>
</li>
<li>
<p>Suit names will now only be sourced from Journal events if the
application didn't (yet) have the equivalent CAPI data.</p>
</li>
<li>
<p>The displayed Suit name is stored in an extra "edmcName" key within
<code>state['Suits']</code> and <code>state['SuitCurrent']</code>.  What was found in the
Journal or CAPI data is still present in the "name" and "locName" values.</p>
</li>
<li>
<p>The "language", "gameversion" and "build" values from the "Fileheader" event
are all now stored in <code>state[]</code> fields.  See <a href="./PLUGINS.md">PLUGINS.md</a> for
updated documentation.</p>
</li>
<li>
<p>We have a new <a href="./Contributing.md">Contributing.md</a> policy of adding
comments in a defined format when we add or change code such that there's a
'hack', 'magic' or 'workaround' in play.  You might find some of this
enlightening going forwards.</p>
</li>
</ul>

<h2>Release 5.0.2</h2>
<p>This release is primarily aimed at getting the UI "<code>Suit: ...</code>" line working
properly.</p>
<ul>
<li>
<p>The "<code>Suit: ...</code>" UI line should now function as best it can given the
available data from the game.  It should not appear if you have launched
the Horizons version of the game, even if your account has Odyssey
enabled.  You might see "<code>&lt;Unknown&gt;</code>" as the text when this application
does not yet have the required data.</p>
</li>
<li>
<p>Changed the less than obvious "<code>unable to get endpoint: /profile</code>" error
message to "<code>Frontier CAPI query failure: /profile</code>", and similarly for the
other CAPI endpoints we attempt to access.  This new form is potentially
translated, but translators need time to do that.</p>
<p>In addition the old message "<code>Received error {r.status_code} from server</code>"
has been changed to "<code>Frontier CAPI server error: {r.status_code}</code>" and is
potentially translated.</p>
</li>
<li>
<p>The filenames used for 'Market data in CSV format file' will now be sane,
and as they were before 5.0.0.</p>
</li>
<li>
<p>Linux: 'Shipyard provider' will no longer default to showing 'False' if
no specific provider has been selected.</p>
</li>
</ul>
<h2>
<a id="user-content-plugin-developers" class="anchor" href="#plugin-developers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Plugin Developers</h2>
<ul>
<li>
<p>Extra <code>Flagse</code> values added in the live release of Odyssey have been added to
<code>edmc_data.py</code>.</p>
</li>
<li>
<p>Odyssey 'BackPack' values should now track better, but might still not be
perfect due to Journal bugs/shortcomings.</p>
</li>
<li>
<p><code>state</code> passed to <code>journal_entry()</code> now has a <code>BackpackJSON</code> (note the case)
member which is a copy of the data from the <code>Backpack.json</code> (yes, that's
currently the correct case) file that is written when there's a <code>BackPack</code>
(guess what, yes, that is currently the correct case) event written to
the Journal.</p>
</li>
<li>
<p><code>state['Credits']</code> tracking is almost certainly not perfect.  We're
accounting for the credits component of <code>SuitUpgrade</code> now, but there
might be other such we've yet accounted for.</p>
</li>
<li>
<p><code>state['Suits']</code> and associated other keys should now be tracking from
Journal events, where possible, as well as CAPI data.</p>
</li>
<li>
<p>There is a section in PLUGINS.md about how to package an extra Python
module with your plugin.  Note the new caveat in
<a href="./PLUGINS.md#avoiding-potential-pitfalls">PLUGINS.md:Avoiding-pitfalls</a>
about the name of your plugin's directory.</p>
</li>
</ul>

<h2>Release 5.0.1</h2>
<p>The main reason for this release is to add an 'odyssey' boolean flag to all
EDDN messages for the benefit of listeners, e.g. eddb.io, inara.cz,
edsm.net, spansh.co.uk, etc.  <strong>Please do update so as to make their lives
easier once Odyssey has launched!</strong></p>
<ul>
<li>
<p>Translations have been updated again.  Thanks to all the contributors.
See <a href="https://github.com/EDCD/EDMarketConnector/wiki/Translations">wiki:Translations</a>
and <a href="https://github.com/EDCD/EDMarketConnector/issues/24">Translations welcome</a>
for links and discussion if you want to help.</p>
</li>
<li>
<p>Changed the error message "<code>Error: Frontier server is down</code>" to
"<code>Error: Frontier CAPI didn't respond</code>" to make it clear this pertains to
the CAPI and not the game servers.</p>
</li>
</ul>
<h2>
<a id="user-content-killswitches" class="anchor" href="#killswitches" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Killswitches</h2>
<p>In the 5.0.0 changelog we said:</p>
  <blockquote>We will **NOT** be using this merely to try and get some
  laggards to upgrade.</blockquote>
<p>However, from now on there is an exception to this.  <strong>After</strong> this
release any subsequent -beta or -rc versions will be killswitched <em>after</em>
their full release is published.</p>
<p>For example, if we put out a <code>5.0.2-beta1</code> and <code>5.0.2-rc1</code> before the full
<code>5.0.2</code>, then when <code>5.0.2</code> was published we would activate all available
killswitches for versions <code>5.0.2-beta1</code> and <code>5.0.2-rc1</code>.  In this example
<code>5.0.1</code> would <strong>not</strong> be killswitched as part of <em>this policy</em> (but still
could be if, e.g. a data corruption bug was found in it).</p>
<p>In general please do <strong>not</strong> linger on any -beta or -rc release if there
has been a subsequent release.  Upgrade to the equivalent full release once it
is published.</p>
<h2>
<a id="user-content-plugin-developers" class="anchor" href="#plugin-developers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Plugin Developers</h2>
<ul>
<li>
<p>Please make the effort to subscribe to GitHub notifications of new
EDMarketConnector releases:</p>
<ol>
<li>Login to <a href="https://github.com">GitHub</a>.</li>
<li>Navigate to <a href="https://github.com/EDCD/EDMarketConnector">EDMarketConnector</a>.</li>
<li>Click the 'Watch' (or 'Unwatch' if you previously set up any watches on
us).  It's currently (2021-05-13) the left-most button of 3 near the
top-right of the page.</li>
<li>Click 'Custom'.</li>
<li>Ensure 'Releases' is selected.</li>
<li>Click 'Apply'.</li>
</ol>
<p>This way you'll be aware, as early as possible, of any -beta and -rc
changelogs and changes that might affect your work.</p>
</li>
<li>
<p><code>state</code> passed to <code>journal_entry()</code> has a new member <code>Odyssey</code> (note the
capital <code>O</code>) which is a boolean indicating if the <code>LoadGame</code> event both has
an <code>Odyssey</code> key, and if so, what the value was.  Defaults to <code>False</code>.</p>
</li>
<li>
<p>PLUGINS.md updated to document the <code>state['Horizons']</code> flag that has been
present in it since version 3.0 of the game.</p>
</li>
<li>
<p>The <code>stations.p</code> and <code>systems.p</code> files that were deprecated in 5.0.0 have
now also been removed in git.  As this release is made they will no
longer be in the <code>develop</code>, <code>main</code> or <code>stable</code> branches.  If you truly
need to find a copy look at the <code>Release/4.2.7</code> tag, but do read the 5.0.0
changelog for why we stopped using them and what you can change to also
not need them.</p>
</li>
</ul>

<h2>Release 5.0.0</h2>
<ul>
<li>
<p>We now test against, and package with, Python 3.9.5.</p>
<p><strong>As a consequence of this we no longer support Windows 7.<br>
This is due to
<a href="https://www.python.org/downloads/windows/" rel="nofollow">Python 3.9.x itself not supporting Windows 7</a>.
The application (both EDMarketConnector.exe and EDMC.exe) will crash on
startup due to a missing DLL.</strong></p>
<p>This should have no other impact on users or plugin developers, other
than the latter now being free to use features that were introduced since the
Python 3.7 series.</p>
<p>Developers can check the contents of the <code>.python-version</code> file
in the source (it's not distributed with the Windows installer) for the
currently used version in a given branch.</p>
</li>
</ul>
<h2>
<a id="user-content-this-update-is-mandatory" class="anchor" href="#this-update-is-mandatory" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>This Update Is Mandatory</h2>
<p>This release is a <strong>mandatory upgrade for the release of Elite Dangerous
Odyssey</strong>.  Any bug reports against earlier releases, pertaining to Odyssey or
not, will be directed to reproduce them with 5.0.0 or later.  There are also
minor bugs in 4.2.7 and earlier that have been fixed in this version.  There
will <strong>NOT</strong> be another 4.2.x release.</p>
<p>The major version has been incremented not for Odyssey support, but because
we have made some minor breaking changes to the APIs we provide for plugin
developers.</p>
<p>Due to these plugin API changes (see below) users might need to update their
plugins.  A check of all the
<a href="https://github.com/EDCD/EDMarketConnector/wiki/Plugins#available-plugins---confirmed-working-under-python-37">Plugins we know about</a>
only found one with an issue related to the move to <code>edmc_data.py</code>, the
developer was informed and the issue addressed.</p>
<p>Other plugins should, at most, log deprecation warnings about the
<code>config</code> changes (again, see below).</p>
<p><strong>In the first instance please report any issues with plugins to <em>their</em>
developers, not us.  They can contact us about EDMC core code issues if
they find such in their investigations.</strong></p>
<p>All plugin developers would benefit from having a GitHub account and then
setting up a watch on <a href="https://github.com/EDCD/EDMarketConnector/">EDMarketConnector</a>
of at least 'Releases' under 'Custom'.</p>
<p>NB: If you had any beta or -rc1 of 5.0.0 installed and see anything weird
with this full release it would be advisable to manually uninstall, confirm
the installation directory (default <code>c:\Program Files (x86)\EDMarketConnector</code>)
is empty, and then re-install 5.0.0 to be sure you have a clean, working,
install.  Anyone upgrading from 4.2.7 or earlier shouldn't see any issues
with this.</p>
<h2>
<a id="user-content-changes-and-enhancements" class="anchor" href="#changes-and-enhancements" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Changes and Enhancements</h2>
<ul>
<li>
<p>If the application detects it's running against a non-live (alpha or beta)
version of the game it will append " (beta)" to the Commander name on the
main UI.</p>
</li>
<li>
<p>Updated translations.  Once more, thanks to all the translators!</p>
</li>
<li>
<p>We now sanity check a returned Frontier Authentication token to be sure
it's for the current Commander.  If it's not you'll see
<code>Error: customer_id doesn't match!</code> on the bottom status line.  Double-check
you're using the correct credentials when authing!</p>
</li>
<li>
<p>New 'Main window transparency' slider on <code>Settings</code> &gt; <code>Appearance</code>.</p>
</li>
<li>
<p>New command-line argument for EDMarketConnector.exe <code>--reset-ui</code>.  This will:</p>
<ol>
<li>Reset to the default Theme.</li>
<li>Reset the UI transparency to fully opaque.</li>
</ol>
<p>The intention is this can be used if you've lost sight of the main window
due to tweaking these options.</p>
<p>There is a new file <code>EDMarketConnector - reset-ui.bat</code> to make utilising
this easy on Windows.</p>
</li>
<li>
<p>New CL arg for EDMarketConnector.exe <code>--force-edmc-protocol</code>.
This is really only of use to core developers (its purpose being to force
use of the <code>edmc://</code> protocol for Frontier Auth callbacks, even when not
'frozen').</p>
</li>
<li>
<p>Linux config will be flushed to disk after any change.  This means that
EDMC.py can now actually make use of the latest CAPI auth if it's been
updated by EDMarketConnector.py since that started.</p>
<p>If you want to run multiple instances of the application under Linux then
please check the updated <a href="https://github.com/EDCD/EDMarketConnector/wiki/Troubleshooting#multi-accounting">Troubleshooting: Multi-Accounting</a>
wiki entry.</p>
</li>
<li>
<p>Linux and macOS: You can now set a font name and size in your config file.<br>
Ensuring this is a TTF font, rather than a bitmap font, should allow the
application UI scaling to work.</p>
<ol>
<li>'font' - the font name to attempt using</li>
<li>'font_size' - the font size to attempt using.</li>
</ol>
<p>There is no UI for this in Preferences, you will need to edit your
<a href="https://github.com/EDCD/EDMarketConnector/wiki/Troubleshooting#location-of-configuration-files">config file</a>
to set or change it, and then restart the application.</p>
<p>This is not supported on Windows so as not to risk weird bugs.  UI
Scaling works on Windows without this.</p>
</li>
<li>
<p>We now also cite the git 'short hash' in the version string.  For a Windows
install of the application this is sourced from the <code>.gitversion</code> file
(written during the build process).</p>
<p>When running from source we attempt to use the command <code>git rev-parse --short HEAD</code>
to obtain this.  If this doesn't work it will be set to 'UNKNOWN'.</p>
</li>
<li>
<p>We have added a 'killswitch' feature to turn off specific functionality if it
is found to have a bug.  An example use of this would be in an "oh
shit! we're sending bad data to EDDN!" moment so as to protect EDDN
listeners such as EDDB.</p>
<p>If we ever have to use this we'll announce it clearly and endeavour to
get a fixed version of the program released ASAP.  We will <strong>NOT</strong> be
using this merely to try and get some laggards to upgrade.</p>
<p>Plugin Developers: See <a href="./docs/Killswitches.md">Killswitches.md</a> for more
information about this.</p>
</li>
<li>
<p>Our logging code will make best efforts to still show class name and
other such fields if it has trouble finding any of the required data for
the calling frame.  This means no longer seeing <code>??:??:??</code> when there is
an issue with this.</p>
</li>
<li>
<p>macOS: We've managed to test the latest code on macOS Catalina.  Other than
<a href="https://github.com/EDCD/EDMarketConnector/issues/906">keyboard shortcut support not working</a>
it appears to be working.</p>
</li>
<li>
<p>We've pulled the latest Coriolis data which might have caused changes to
ship and module names as written out to some files.</p>
</li>
</ul>
<h2>
<a id="user-content-odyssey" class="anchor" href="#odyssey" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Odyssey</h2>
<p>Every effort was made during the Odyssey Alphas to ensure that this
application will continue to function correctly with it.  As always, make a
<a href="https://github.com/EDCD/EDMarketConnector/issues/new?assignees=&amp;labels=bug%2C+unconfirmed&amp;template=bug_report.md&amp;title=">Bug Report</a>
if you find anything not working, but be sure to check our
<a href="https://github.com/EDCD/EDMarketConnector/issues/618">Known Issues</a> first.</p>
<ul>
<li>
<p>A new UI element 'Suit' now appears below 'Ship' when applicable. It
details the type of suit you currently have equipped and its Loadout name.<br>
This UI element is collapsed/hidden if no suit/on-foot state is detected,
e.g. not playing Odyssey.</p>
</li>
<li>
<p>Note that we can only reliably know about Suits and their Loadouts from a
CAPI data pull (which is what we do automatically on docking if
configured to do so, or when you press the 'Update' button).  We do
attempt to gather this data from Journal events as well, but if you
switch to a Suit Loadout that hasn't been mentioned in them yet we won't
be able to display that until the next CAPI data pull.</p>
</li>
</ul>
<p>If anyone becomes aware of a 'suit loadouts' site/tool, a la Coriolis/EDSY
but for Odyssey Suits, do let us know so we can add support for it!
We're already kicking around ideas to e.g. place JSON text in the clipboard
if the Suit Loadout is clicked.</p>
<h2>
<a id="user-content-bug-fixes" class="anchor" href="#bug-fixes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Bug Fixes</h2>
<ul>
<li>
<p>Fix ship loadout export to files to not trip up in the face of file encoding
issues. This relates to the 'Ship Loadout' option on the 'Output' tab of
Settings/Preferences.</p>
</li>
<li>
<p>Ship Type/Name will now be greyed out, and not clickable, if we don't
currently have loadout information for it.  This prevents trying to send an
empty loadout to your shipyard provider.</p>
</li>
<li>
<p>Bug fixed when handling CAPI-sourced shipyard information.  This happens
due to a Frontier bug with not returning shipyard data at all for normal
stations.</p>
<p>It has been observed that Frontier has fixed this bug for Odyssey.</p>
</li>
<li>
<p>Don't try to get Ship information from <code>LoadGame</code> event if directly in CQC.</p>
</li>
<li>
<p>Inara: Don't attempt to send an empty
<code>setCommanderReputationMajorFaction</code> API call.  This quietens an error
from the Inara API caused when a Cmdr literally has no Major Faction
Reputation yet.</p>
</li>
</ul>
<h2>
<a id="user-content-code-clean-up" class="anchor" href="#code-clean-up" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Code Clean Up</h2>
<ul>
<li>
<p>Code pertaining to processing Journal events was reworked and noisy logging
reduced as a consequence.</p>
</li>
<li>
<p>A little TRACE logging output has been commented out for now.</p>
</li>
<li>
<p>The code for <code>File</code> &gt; <code>Status</code> has been cleaned up.</p>
</li>
<li>
<p>Localisation code has been cleaned up.</p>
</li>
<li>
<p>Code handling the Frontier Authorisation callback on Windows has been
cleaned up.</p>
</li>
<li>
<p>A lot of general code cleanup relating to: Inara, outfitting, Frontier
CAPI, hotkey (manual Updates), dashboard (Status.json monitoring),
commodities files, and ED format ship loadout files.</p>
</li>
</ul>
<h2>
<a id="user-content-plugin-developers" class="anchor" href="#plugin-developers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Plugin Developers</h2>
<ul>
<li>
<p>The files <code>stations.p</code> and <code>systems.p</code> have been removed from the Windows
Installer.  These were never intended for third-party use.  Their use in
core code was for generating EDDB-id URLs, but we long since changed the
EDDB plugin's handlers for that to use alternate URL formats based on
game IDs or names.</p>
<p>If you were using either to lookup EDDB IDs for systems and/or stations
then please see how <code>system_url()</code> and <code>station_url()</code> now work in
<code>plugins/eddb.py</code>.</p>
<p>This change also removed the core (not plugin) <code>eddb.py</code> file which
generated these files.  You can find it still in the git history if needs
be.  It had gotten to the stage where generating <code>systems.p</code> took many
hours and required 64-bit Python to have any hope of working due to
memory usage.</p>
</li>
<li>
<p>All static data that is
<a href="https://github.com/EDCD/EDMarketConnector/blob/main/PLUGINS.md#available-imports">cleared for use by plugins</a>
is now in the file
<code>edmc_data.py</code> and should be imported from there, not <em>any</em> other module.</p>
<p>The one thing we didn't move was the 'bracket map' dictionaries in <code>td.py</code>
as they're for use only by the code in that file.</p>
<p>All future such data will be added to this file, and we'll endeavour not
to make breaking changes to any of it without increasing our Major version.</p>
</li>
<li>
<p><code>config.appversion()</code> is now a function that returns a <code>semantic_version.Version</code>.
In contexts where you're expecting a string this should mostly
just work.  If needs be wrap it in <code>str()</code>.</p>
<p>For backwards compatibility with pre-5.0.0 you can use:</p>
</li>
</ul>
<div class="highlight highlight-source-python"><pre>    <span class="pl-k">from</span> <span class="pl-s1">config</span> <span class="pl-k">import</span> <span class="pl-s1">appversion</span>

    <span class="pl-k">if</span> <span class="pl-en">callable</span>(<span class="pl-s1">appversion</span>):
        <span class="pl-s1">edmc_version</span> <span class="pl-c1">=</span> <span class="pl-en">appversion</span>()
    <span class="pl-k">else</span>:
        <span class="pl-s1">edmc_version</span> <span class="pl-c1">=</span> <span class="pl-s1">appversion</span></pre></div>
<ul>
<li>
<p>Example plugin
<a href="https://github.com/EDCD/EDMarketConnector/tree/main/docs/examples/plugintest">plugintest</a>
updated.  This includes an example of how to check core EDMC version if needs
be.  This example is also in
<a href="https://github.com/EDCD/EDMarketConnector/blob/main/PLUGINS.md#checking-core-edmc-version">PLUGINS.md</a>.</p>
</li>
<li>
<p><code>config.py</code> has undergone a major rewrite.  You should no longer be using
<code>config.get(...)</code> or <code>config.getint(...)</code>, which will both give a
deprecation warning.<br>
Use instead the correct <code>config.get_&lt;type&gt;()</code> function:</p>
<ul>
<li><code>config.get_list(&lt;key&gt;)</code></li>
<li><code>config.get_str(&lt;key&gt;)</code></li>
<li><code>config.get_bool(&lt;key&gt;)</code></li>
<li><code>config.get_int(&lt;key&gt;)</code></li>
</ul>
<p>Setting still uses <code>config.set(...)</code>.</p>
<p>So:</p>
<ol>
<li>Replace all instances of <code>config.get()</code> and <code>config.getint()</code> as above.</li>
<li>For ease of maintaining compatibility with pre-5.0.0 versions include
this code in at least one module/file (no harm in it being in all that
manipulate plugin config):</li>
</ol>
</li>
</ul>
<pre><code>from config import config

# For compatibility with pre-5.0.0
if not hasattr(config, 'get_int'):
    config.get_int = config.getint

if not hasattr(config, 'get_str'):
    config.get_str = config.get

if not hasattr(config, 'get_bool'):
    config.get_bool = lambda key: bool(config.getint(key))

if not hasattr(config, 'get_list'):
    config.get_list = config.get
</code></pre>
<ul>
<li>
<p>Utilising our provided logging from a class-level, i.e. not a solid
instance of a class, property/function will now work.</p>
</li>
<li>
<p>We now change the current working directory of EDMarketConnector.exe to
its location as soon as possible in its execution.  We're also
paranoid about ensuring we reference the full path to the <code>.gitversion</code> file.</p>
<p>However, no plugin should itself call <code>os.chdir(...)</code> or equivalent.  You'll
change the current working directory for all core code and other plugins as
well (it's global to the whole <strong>process</strong>, not per-thread).  Use full
absolute paths instead (<code>pathlib</code> is what to use for this).</p>
</li>
<li>
<p>The <code>state</code> dict passed to plugins in <code>journal_entry()</code> calls (which is
actually <code>monitor.state</code> in the core code) has received many additions
relating to Odyssey, as well as other fixes and enhancements.</p>
<ol>
<li>
<p>Support has been added for the <code>NavRoute</code> (not <code>Route</code> as v28 of the
official Journal documentation erroneously labels it) Journal event and
its associated file <code>NavRoute.json</code>.  See <a href="https://github.com/EDCD/EDMarketConnector/blob/main/PLUGINS.md#journal-entry">PLUGINS.md:Events documentation</a></p>
</li>
<li>
<p>Similarly, there is now support for the <code>ModuleInfo</code> event and its
associated <code>ModulesInfo.json</code> file.</p>
</li>
<li>
<p><code>state['Credits']</code> - until now no effort was made to keep this
record of the credits balance up to date after the initial <code>LoadGame</code>
event.  This has now been addressed, and the balance should stay in sync
as best it can from the available Journal events.  It will always correct
back to the actual balance on each CAPI data pull or game relog/restart.</p>
</li>
<li>
<p><code>state['Cargo']</code> now takes account of any <code>CargoTransfer</code> events.
This was added to the game in the Fleet Carriers update, but also covers
transfers to/from an SRV.</p>
</li>
<li>
<p><code>state['OnFoot']</code> is a new boolean, set true whenever we detect
the Cmdr is on-foot, i.e. not in any type of vehicle (Cmdr's own ship,
SRV, multi-crew in another Cmdr's ship, Apex taxi, or a Dropship).</p>
</li>
<li>
<p><code>state['Suits']</code> and <code>state['SuitLoadouts']</code> added as <code>dict</code>s containing
information about the Cmdr's owned Suits and the Loadouts the Cmdr has
defined to utilise them (and on-foot weapons).
Note that in the raw CAPI data these are arrays if all members
contiguously exist, else a dictionary, but we have chosen to always coerce
these to a python <code>dict</code> for simplicity.  They will be empty <code>dict</code>s, not
<code>None</code> if there is no data.<br>
We use the CAPI data names for keys, not the Journal ones - e.g. <code>slots</code>
for weapons equipped, not <code>Modules</code>.
The <code>id</code> field found on e.g. weapon details in suit loadouts may be <code>None</code>
if we got the data from the Journal rather than the CAPI data.
NB: This data is only guaranteed up to date and correct after a fresh CAPI
data pull, as the current Journal events don't allow for updating it on the
fly (this should change in a future Odyssey patch).</p>
</li>
<li>
<p><code>state['SuitCurrent']</code> and <code>state['SuitLoadoutCurrent']</code> contain the
obvious "currently in use" data as per the Suits/SuitLoadouts.</p>
</li>
<li>
<p>Tracking of the new Odyssey 'Microresources' has been added:</p>
<ol>
<li>
<code>Component</code> - <code>dict</code> for 'Ship Locker' inventory.</li>
<li>
<code>Item</code> - <code>dict</code> for 'Ship Locker' inventory.</li>
<li>
<code>Consumable</code> - <code>dict</code> for 'Ship Locker' inventory.</li>
<li>
<code>Data</code> - <code>dict</code> for 'Ship Locker' inventory.</li>
<li>
<code>BackPack</code> - on-foot inventory, a <code>dict</code> containing again
dicts for <code>Component</code>, <code>Item</code>, <code>Consumable</code> and <code>Data</code>.
However note that the lack of a Journal event when throwing a grenade,
along with no <code>BackPackMaterials</code> event if logging in on-foot means that
we can't track the BackPack inventory perfectly.</li>
</ol>
</li>
</ol>
<p>See the updated <code>PLUGINS.md</code> file for details.</p>
</li>
<li>
<p>As <code>Status.json</code>, and thus the EDMC 'dashboard' output now has a 'flags2'
key we have added the associated constants to <code>edmc_data.py</code> with a
<code>Flags2</code> prefix on the names.</p>
</li>
<li>
<p>Note that during the Odyssey Alpha it was observed that the CAPI
<code>data['commander']['docked']</code> boolean was <strong>always true</strong> if the Cmdr was
in their ship.  This is a regression from pre-Odyssey behaviour.  The
core EDMC code copes with this.  Please add a reproduction to the issue
about this:
<a href="https://issues.frontierstore.net/issue-detail/28638" rel="nofollow">PTS CAPI saying Commander is Docked after jumping to new system</a>.</p>
</li>
</ul>


				]]>
			</description>
			<enclosure
				url="https://github.com/EDCD/EDMarketConnector/releases/download/Release/5.6.0/EDMarketConnector_win_5.6.0.msi"
				sparkle:os="windows"
				sparkle:installerArguments="/passive LAUNCH=yes"
				sparkle:version="5.6.0"
				length="17162240"
				type="application/octet-stream"
			/>
		</item>

	</channel>
</rss>
